cmake_minimum_required(VERSION 3.10) # minimum version of CMake
cmake_policy(SET CMP0135 NEW) # Silence warning for FetchContent

project(Battleship) # The project name

#Add fetch contant macro to fetch external libraries from their repo
include(FetchContent)

#Fetch the nlohmann json library
FetchContent_Declare(json URL https://github.com/nlohmann/json/releases/download/v3.11.3/json.tar.xz)
FetchContent_MakeAvailable(json)



# Define an executable target built from `client.cpp` and its dependencies
add_executable(client 
src/client/client.cpp 
src/client/network/GameClient.cpp
)
# Define include directories for target 'client' 
target_include_directories(client PRIVATE include/client/network)

# Define an executable target built from `server.cpp` and its dependencies
add_executable(server 
src/server/server.cpp 
src/server/network/GameServer.cpp 
src/server/network/SessionManager.cpp 
src/server/network/GameSession.cpp 
src/server/game/GameState.cpp
)
# Define include directories for target 'server'
target_include_directories(server PRIVATE include/server/database include/server/game include/server/network)

#Specifies libraries for targets
target_link_libraries(server PRIVATE nlohmann_json::nlohmann_json)
target_link_libraries(client PRIVATE nlohmann_json::nlohmann_json)

# using libraries like cpprestsdk, link with both executables
find_package(cpprestsdk REQUIRED)
target_link_libraries(server PRIVATE cpprestsdk::cpprest)
target_link_libraries(client PRIVATE cpprestsdk::cpprest)
